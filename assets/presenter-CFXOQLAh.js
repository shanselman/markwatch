import{j as e,R as w,a as p}from"./index-T_edayIv.js";const v=({topic:o,remainingMs:s,progress:t,shrinkMode:n=!0})=>{const r=Math.floor(s/6e4),x=Math.floor(s%6e4/1e3),f=Math.floor(s%1e3/10),g=`${String(r).padStart(2,"0")}:${String(x).padStart(2,"0")}.${String(f).padStart(2,"0")}`,k=t*360,l=2*Math.PI*230,u=n?l*t:l*(1-t),i=s<=0,c=s<=5e3,m=s<=15e3&&s>5e3,y=n?"white":"black",h=n?"black":"white";let a="#06b6d4";return i||c?a="#ef4444":m&&(a="#f59e0b"),e.jsxs("div",{className:"presenter-view",children:[e.jsx("div",{className:"presenter-topic",children:o}),e.jsxs("div",{className:`presenter-clock-container ${i||c?"glow":""}`,style:{color:a},children:[e.jsxs("svg",{className:"presenter-progress-ring",viewBox:"0 0 500 500",children:[e.jsx("defs",{children:e.jsxs("mask",{id:"pie-mask",children:[e.jsx("rect",{width:"500",height:"500",fill:"black"}),e.jsx("circle",{cx:"250",cy:"250",r:"245",fill:y}),t<1&&e.jsx("path",{d:`M 250 250 L 250 5 A 245 245 0 ${t>.5?1:0} 1 ${250+245*Math.sin(t*2*Math.PI)} ${250-245*Math.cos(t*2*Math.PI)} Z`,fill:h}),t>=1&&e.jsx("circle",{cx:"250",cy:"250",r:"245",fill:h})]})}),e.jsx("circle",{cx:"250",cy:"250",r:"245",fill:"#1a1a2a",className:"presenter-pie-background"}),e.jsx("circle",{cx:"250",cy:"250",r:"230",fill:"none",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"8",className:"presenter-ring-background"}),e.jsx("circle",{cx:"250",cy:"250",r:"230",fill:"none",stroke:a,strokeWidth:"8",strokeDasharray:l,strokeDashoffset:u,strokeLinecap:"round",className:"presenter-progress-stroke",style:{transform:"rotate(-90deg)",transformOrigin:"250px 250px",transition:"stroke 0.3s ease, stroke-dashoffset 0.1s linear"}}),e.jsx("circle",{cx:"250",cy:"250",r:"245",fill:a,mask:"url(#pie-mask)",className:"presenter-pie-fill",style:{transition:"fill 0.3s ease"}})]}),e.jsx("div",{className:"presenter-clock-face",children:e.jsxs("div",{className:"presenter-clock-bezel",children:[[...Array(60)].map((N,d)=>{const j=d%5===0;return e.jsx("div",{className:`presenter-marker ${j?"hour-marker":"minute-marker"}`,style:{transform:`rotate(${d*6}deg) translateY(-48%)`}},d)}),e.jsx("div",{className:`presenter-second-hand ${i||c?"glow":""}`,style:{transform:`rotate(${k}deg)`,backgroundColor:a}}),e.jsx("div",{className:`presenter-center-dot ${i||c?"glow":""}`,style:{backgroundColor:a}})]})}),e.jsx("div",{className:`presenter-time presenter-time-overlay ${i||c?"expired":m?"warning":""}`,style:{color:a},children:g})]})]})};document.body.style.overflow="hidden";document.body.style.margin="0";document.body.style.padding="0";document.documentElement.style.overflow="hidden";function M(){const[o,s]=p.useState({topic:"Loading...",remainingMs:0,progress:0,totalDuration:90,shrinkMode:!0});return p.useEffect(()=>{const t=n=>{if(console.log("Presenter received message:",n.data),n.data.type==="TIMER_UPDATE"){const r=n.data.payload;console.log("Updating presenter state:",r),s({topic:r.topic,remainingMs:r.remainingMs,progress:r.progress,totalDuration:r.totalDuration,shrinkMode:r.shrinkMode??!0})}};return window.addEventListener("message",t),window.opener&&window.opener.postMessage({type:"PRESENTER_READY"},"*"),()=>window.removeEventListener("message",t)},[]),e.jsx(v,{topic:o.topic,remainingMs:o.remainingMs,progress:o.progress,totalDuration:o.totalDuration,shrinkMode:o.shrinkMode})}w.createRoot(document.getElementById("presenter-root")).render(e.jsx(p.StrictMode,{children:e.jsx(M,{})}));
