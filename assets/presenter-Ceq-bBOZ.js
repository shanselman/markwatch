import{j as e,R as y,a as d}from"./index-T_edayIv.js";const k=({topic:u,remainingMs:n,progress:a})=>{const f=Math.floor(n/6e4),t=Math.floor(n%6e4/1e3),m=Math.floor(n%1e3/10),o=`${String(f).padStart(2,"0")}:${String(t).padStart(2,"0")}.${String(m).padStart(2,"0")}`,r=a*360,s=2*Math.PI*230,p=s*(1-a),l=n<=0,c=n<=5e3,g=n<=15e3&&n>5e3;let i="#06b6d4";return l||c?i="#ef4444":g&&(i="#f59e0b"),e.jsxs("div",{className:"presenter-view",children:[e.jsx("div",{className:"presenter-topic",children:u}),e.jsxs("div",{className:`presenter-clock-container ${l||c?"glow":""}`,style:{color:i},children:[e.jsxs("svg",{className:"presenter-progress-ring",viewBox:"0 0 500 500",children:[e.jsx("defs",{children:e.jsxs("mask",{id:"pie-mask",children:[e.jsx("rect",{width:"500",height:"500",fill:"white"}),e.jsx("circle",{cx:"250",cy:"250",r:"245",fill:"black"}),a<1&&e.jsx("path",{d:`M 250 250 L 250 5 A 245 245 0 ${a>.5?1:0} 1 ${250+245*Math.sin(a*2*Math.PI)} ${250-245*Math.cos(a*2*Math.PI)} Z`,fill:"white"}),a>=1&&e.jsx("circle",{cx:"250",cy:"250",r:"245",fill:"white"})]})}),e.jsx("circle",{cx:"250",cy:"250",r:"245",fill:"#1a1a2a",className:"presenter-pie-background"}),e.jsx("circle",{cx:"250",cy:"250",r:"230",fill:"none",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"8",className:"presenter-ring-background"}),e.jsx("circle",{cx:"250",cy:"250",r:"230",fill:"none",stroke:i,strokeWidth:"8",strokeDasharray:s,strokeDashoffset:p,strokeLinecap:"round",className:"presenter-progress-stroke",style:{transform:"rotate(-90deg)",transformOrigin:"250px 250px",transition:"stroke 0.3s ease, stroke-dashoffset 0.1s linear"}}),e.jsx("circle",{cx:"250",cy:"250",r:"245",fill:i,mask:"url(#pie-mask)",className:"presenter-pie-fill",style:{transition:"fill 0.3s ease"}})]}),e.jsx("div",{className:"presenter-clock-face",children:e.jsxs("div",{className:"presenter-clock-bezel",children:[[...Array(60)].map((w,x)=>{const h=x%5===0;return e.jsx("div",{className:`presenter-marker ${h?"hour-marker":"minute-marker"}`,style:{transform:`rotate(${x*6}deg) translateY(-48%)`}},x)}),e.jsx("div",{className:`presenter-second-hand ${l||c?"glow":""}`,style:{transform:`rotate(${r}deg)`,backgroundColor:i}}),e.jsx("div",{className:`presenter-center-dot ${l||c?"glow":""}`,style:{backgroundColor:i}})]})}),e.jsx("div",{className:`presenter-time presenter-time-overlay ${l||c?"expired":g?"warning":""}`,style:{color:i},children:o})]})]})};document.body.style.overflow="hidden";document.body.style.margin="0";document.body.style.padding="0";document.documentElement.style.overflow="hidden";function j(){const[u,n]=d.useState({topic:"Loading...",totalDuration:90}),[a,f]=d.useState({remainingMs:0,progress:0}),[t,m]=d.useState({startTimeMs:0,elapsedAtStart:0,totalDuration:90,isRunning:!1});return d.useEffect(()=>{if(!t.isRunning)return;let o;const r=()=>{const s=performance.now(),p=t.elapsedAtStart+(s-t.startTimeMs),l=Math.max(0,t.totalDuration*1e3-p),c=t.totalDuration>0?p/(t.totalDuration*1e3):0;f({remainingMs:l,progress:c}),p<t.totalDuration*1e3?o=requestAnimationFrame(r):m(g=>({...g,isRunning:!1}))};return o=requestAnimationFrame(r),()=>cancelAnimationFrame(o)},[t.isRunning,t.startTimeMs,t.elapsedAtStart,t.totalDuration]),d.useEffect(()=>{const o=r=>{if(r.data.type==="TIMER_UPDATE"){const s=r.data.payload;n({topic:s.topic,totalDuration:s.totalDuration}),f({remainingMs:s.remainingMs,progress:s.progress})}else if(r.data.type==="TIMER_START"){const s=r.data.totalDuration||90;m({startTimeMs:performance.now(),elapsedAtStart:r.data.elapsedMs||0,totalDuration:s,isRunning:!0})}else r.data.type==="TIMER_PAUSE"&&m(s=>({...s,isRunning:!1}))};return window.addEventListener("message",o),window.opener&&window.opener.postMessage({type:"PRESENTER_READY"},"*"),()=>window.removeEventListener("message",o)},[]),e.jsx(k,{topic:u.topic,remainingMs:a.remainingMs,progress:a.progress,totalDuration:u.totalDuration})}y.createRoot(document.getElementById("presenter-root")).render(e.jsx(d.StrictMode,{children:e.jsx(j,{})}));
