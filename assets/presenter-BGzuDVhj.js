import{j as e,R as w,a as m}from"./index-T_edayIv.js";const v=({topic:a,remainingMs:s,progress:t,shrinkMode:n=!0})=>{const o=Math.floor(s/6e4),x=Math.floor(s%6e4/1e3),f=Math.floor(s%1e3/10),k=`${String(o).padStart(2,"0")}:${String(x).padStart(2,"0")}.${String(f).padStart(2,"0")}`,u=t*360,l=2*Math.PI*230,g=n?l*t:l*(1-t),i=s<=0,c=s<=5e3,p=s<=15e3&&s>5e3,y=n?"white":"black",h=n?"black":"white";let r="#06b6d4";return i||c?r="#ef4444":p&&(r="#f59e0b"),e.jsxs("div",{className:"presenter-view",children:[e.jsx("div",{className:"presenter-topic",children:a}),e.jsxs("div",{className:`presenter-clock-container ${i||c?"glow":""}`,style:{color:r},children:[e.jsxs("svg",{className:"presenter-progress-ring",viewBox:"0 0 500 500",children:[e.jsx("defs",{children:e.jsxs("mask",{id:"pie-mask",children:[e.jsx("rect",{width:"500",height:"500",fill:"black"}),e.jsx("circle",{cx:"250",cy:"250",r:"245",fill:y}),t<1&&e.jsx("path",{d:`M 250 250 L 250 5 A 245 245 0 ${t>.5?1:0} 1 ${250+245*Math.sin(t*2*Math.PI)} ${250-245*Math.cos(t*2*Math.PI)} Z`,fill:h}),t>=1&&e.jsx("circle",{cx:"250",cy:"250",r:"245",fill:h})]})}),e.jsx("circle",{cx:"250",cy:"250",r:"245",fill:"#1a1a2a",className:"presenter-pie-background"}),e.jsx("circle",{cx:"250",cy:"250",r:"230",fill:"none",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"8",className:"presenter-ring-background"}),e.jsx("circle",{cx:"250",cy:"250",r:"230",fill:"none",stroke:r,strokeWidth:"8",strokeDasharray:l,strokeDashoffset:g,strokeLinecap:"round",className:"presenter-progress-stroke",style:{transform:"rotate(-90deg)",transformOrigin:"250px 250px",transition:"stroke 0.3s ease, stroke-dashoffset 0.1s linear"}}),e.jsx("circle",{cx:"250",cy:"250",r:"245",fill:r,mask:"url(#pie-mask)",className:"presenter-pie-fill",style:{transition:"fill 0.3s ease"}})]}),e.jsx("div",{className:"presenter-clock-face",children:e.jsxs("div",{className:"presenter-clock-bezel",children:[[...Array(60)].map((N,d)=>{const j=d%5===0;return e.jsx("div",{className:`presenter-marker ${j?"hour-marker":"minute-marker"}`,style:{transform:`rotate(${d*6}deg) translateY(-48%)`}},d)}),e.jsx("div",{className:`presenter-second-hand ${i||c?"glow":""}`,style:{transform:`rotate(${u}deg)`,backgroundColor:r}}),e.jsx("div",{className:`presenter-center-dot ${i||c?"glow":""}`,style:{backgroundColor:r}})]})}),e.jsx("div",{className:`presenter-time presenter-time-overlay ${i||c?"expired":p?"warning":""}`,style:{color:r},children:k})]})]})};document.body.style.overflow="hidden";document.body.style.margin="0";document.body.style.padding="0";document.documentElement.style.overflow="hidden";function M(){const[a,s]=m.useState({topic:"Loading...",remainingMs:0,progress:0,totalDuration:90,shrinkMode:!0});return m.useEffect(()=>{const t=n=>{if(n.data.type==="TIMER_UPDATE"){const o=n.data.payload;s({topic:o.topic,remainingMs:o.remainingMs,progress:o.progress,totalDuration:o.totalDuration,shrinkMode:o.shrinkMode??!0})}};return window.addEventListener("message",t),window.opener&&window.opener.postMessage({type:"PRESENTER_READY"},"*"),()=>window.removeEventListener("message",t)},[]),e.jsx(v,{topic:a.topic,remainingMs:a.remainingMs,progress:a.progress,totalDuration:a.totalDuration,shrinkMode:a.shrinkMode})}w.createRoot(document.getElementById("presenter-root")).render(e.jsx(m.StrictMode,{children:e.jsx(M,{})}));
